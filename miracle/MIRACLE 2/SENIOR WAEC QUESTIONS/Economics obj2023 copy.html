<div id="quiz">
    <div class="question">
        <div class="question-number"><strong>1.</strong></div>
        <p> The study of economics is mainly concerned with how to  </p>
        <div class="options">
            <div class="option" data-correct="false">A. Rank individuals’ wants given the abundant resources</div>
            <div class="option" data-correct="true">B. Make choice when resources are inadequate</div>
            <div class="option" data-correct="false">C. Satisfy every member of all societies.</div>
            <div class="option" data-correct="false">D. Produce all the goods needed by everyone.</div>
        </div>
        <button class="check-answer hidden button">Check Answer</button>
        <div class="container hidden">
            <div class="answer hidden">The correct answer is Option B. make choice when resources are inadequate
                <div style="width: 25vw; height: auto;">
                    <img src="/" style="width: 100%; height: auto;"> </img>
                </div>
                </br>
                </br>
            </div>
            <button id="subject-button" class="hidden button">More..?</button>
            <div id="more-content" class="hidden">
                </br>
                <div id="subject-name" class="hidden"> The correct answer is B. make choice when resources are inadequate.

                    Explanation:
                    Economics is fundamentally the study of how individuals, businesses, and societies make choices in the face of scarcity. Scarcity refers to the basic economic problem that resources (such as time, money, raw materials, etc.) are limited, while human wants and needs are virtually unlimited. Because of this, economics focuses on how to allocate these limited resources to meet the most pressing needs and desires.
                </div></br>
                <div class="incorrect-explanation hidden" data-option="A">
                    <div style="width: 25vw; height: auto;">
                        <img src="/" style="width: 100%; height: auto;"> </img>
                        A. rank individuals’ wants given the abundant resources: This option is incorrect because it assumes that resources are abundant, which contradicts the central concept of scarcity in economics. If resources were abundant, there would be no need to rank wants or make difficult choices.
                    </div>
                </div></br>
                <div class="incorrect-explanation hidden" data-option="C">
                    <div style="width: 25vw; height: auto;">
                        <img src="/" style="width: 100%; height: auto;"> </img>
                        C. satisfy every member of all societies: This option is incorrect because it is impossible to satisfy every member of society given the limited resources available. Economics instead studies how to make the best possible choices to maximize welfare given these constraints.
                    </div>
                </div></br>
                <div class="incorrect-explanation hidden" data-option="D">
                    <div style="width: 25vw; height: auto;">
                        <img src="/" style="width: 100%; height: auto;"> </img>
                        D. produce all the goods needed by everyone: This option is incorrect because it assumes that it's possible to produce everything needed by everyone, which ignores the reality of limited resources. Economics involves making decisions about what goods and services to produce, how to produce them, and for whom they should be produced.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var score = 0;
    var progress = 0;
    var isAnimating = false;

    $(".option").click(function() {
        if ($(this).hasClass("selected")) {
            return;
        }
        $(this).addClass("selected");
        $(this).siblings().removeClass("correct incorrect");
        $(this).addClass($(this).data("correct") ? "correct" : "incorrect");
        if ($(this).data("correct")) {
            score++;
            $("#score").text("Score: " + score);
        } else {
            $(this).parent().siblings(".check-answer").removeClass("hidden");
        }
        // Remove the 'hidden' class from the "Check Answer" button
        $(this).siblings(".check-answer").removeClass("hidden");
        progress++;
        $("#progress").text("Progress: " + progress + "/50");
    });

    function displayAnswer(that) {
        if (isAnimating) return;
        var container = $(that).siblings('.container');
        var answer = container.children('.answer');
        var htmlContent = answer.html();
        var i = 0;

        // Find the index of the end of the "answer hidden" div
        var endIndex = htmlContent.indexOf('</div>', htmlContent.indexOf('<div style')) + 6;

        answer.html('');
        answer.removeClass('hidden');
        container.removeClass('hidden');
        isAnimating = true;

        function typeWriter() {
            if (i < endIndex) {
                if (htmlContent.charAt(i) === '<') {
                    var tagEnd = htmlContent.indexOf('>', i) + 1;
                    answer.append(htmlContent.slice(i, tagEnd));
                    i = tagEnd;
                } else {
                    answer.append(htmlContent.charAt(i));
                    i++;
                }
                setTimeout(typeWriter, 40);
            } else {
                container.children('#subject-button').removeClass('hidden');
                isAnimating = false;
            }
        }

        typeWriter();
    }

    $(".check-answer").click(function() {
        displayAnswer(this);
    });

    function displayMoreContent(that) {
        if (isAnimating) return;
        var moreContent = $(that).siblings('#more-content');
        var selectedOption = $(that).closest('.question').find('.option.selected').text().trim().charAt(0);
        var correctExplanation = moreContent.find('#subject-name').html();
        var incorrectExplanation = moreContent.find('.incorrect-explanation[data-option="' + selectedOption + '"]').html();
        var htmlContent = correctExplanation + incorrectExplanation;
        var i = 0;

        moreContent.html('');
        moreContent.removeClass('hidden');
        isAnimating = true;

        function typeWriter() {
            if (i < htmlContent.length) {
                if (htmlContent.charAt(i) === '<') {
                    var tagEnd = htmlContent.indexOf('>', i) + 1;
                    moreContent.append(htmlContent.slice(i, tagEnd));
                    i = tagEnd;
                } else {
                    moreContent.append(htmlContent.charAt(i));
                    i++;
                }
                setTimeout(typeWriter, 40);
            } else {
                isAnimating = false;
            }
        }

        typeWriter();
    }

    $(".container").on("click", "#subject-button", function() {
        displayMoreContent(this);
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const options = document.querySelectorAll('.option');
        options.forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                question.classList.add('answered');
                this.classList.add('selected');
                question.querySelector('.check-answer').classList.remove('hidden');
            });
        });

        const checkAnswerButtons = document.querySelectorAll('.check-answer');
        checkAnswerButtons.forEach(button => {
            button.addEventListener('click', function() {
                const question = this.closest('.question');
                question.querySelector('.answer').classList.remove('hidden');
            });
        });
    });
</script>
